"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const events_1 = __importDefault(require("events"));
class NativeRefreshEventsHandlerService {
    constructor(actionPermissionService, usersPermissionService, renderingPermissionService) {
        this.actionPermissionService = actionPermissionService;
        this.usersPermissionService = usersPermissionService;
        this.renderingPermissionService = renderingPermissionService;
        this.eventEmitter = new events_1.default();
    }
    refreshUsers() {
        this.usersPermissionService.invalidateCache();
    }
    refreshRoles() {
        this.actionPermissionService.invalidateCache();
    }
    refreshRenderings(renderingIds) {
        for (const renderingId of renderingIds) {
            this.renderingPermissionService.invalidateCache(renderingId);
        }
    }
    refreshCustomizations() {
        this.eventEmitter.emit('RefreshCustomizations');
    }
    onRefreshCustomizations(handler) {
        this.eventEmitter.on('RefreshCustomizations', handler);
    }
    refreshEverything() {
        this.usersPermissionService.invalidateCache();
        this.actionPermissionService.invalidateCache();
        this.renderingPermissionService.invalidateAllCache();
        // Emit RefreshCustomizations event
        this.eventEmitter.emit('RefreshCustomizations');
    }
}
exports.default = NativeRefreshEventsHandlerService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF0aXZlLXJlZnJlc2gtZXZlbnRzLWhhbmRsZXItc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ldmVudHMtc3Vic2NyaXB0aW9uL25hdGl2ZS1yZWZyZXNoLWV2ZW50cy1oYW5kbGVyLXNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxvREFBa0M7QUFPbEMsTUFBcUIsaUNBQWlDO0lBR3BELFlBQ21CLHVCQUFnRCxFQUNoRCxzQkFBNkMsRUFDN0MsMEJBQXNEO1FBRnRELDRCQUF1QixHQUF2Qix1QkFBdUIsQ0FBeUI7UUFDaEQsMkJBQXNCLEdBQXRCLHNCQUFzQixDQUF1QjtRQUM3QywrQkFBMEIsR0FBMUIsMEJBQTBCLENBQTRCO1FBRXZFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxnQkFBWSxFQUFFLENBQUM7SUFDekMsQ0FBQztJQUVNLFlBQVk7UUFDakIsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ2hELENBQUM7SUFFTSxZQUFZO1FBQ2pCLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUNqRCxDQUFDO0lBRU0saUJBQWlCLENBQUMsWUFBaUM7UUFDeEQsS0FBSyxNQUFNLFdBQVcsSUFBSSxZQUFZLEVBQUU7WUFDdEMsSUFBSSxDQUFDLDBCQUEwQixDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQztTQUM5RDtJQUNILENBQUM7SUFFTSxxQkFBcUI7UUFDMUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBRU0sdUJBQXVCLENBQUMsT0FBbUM7UUFDaEUsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsdUJBQXVCLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVNLGlCQUFpQjtRQUN0QixJQUFJLENBQUMsc0JBQXNCLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDOUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQy9DLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBRXJELG1DQUFtQztRQUNuQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0lBQ2xELENBQUM7Q0FDRjtBQXpDRCxvREF5Q0MifQ==