"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const datasource_toolkit_1 = require("@forestadmin/datasource-toolkit");
const build_default_condition_1 = __importDefault(require("./utils/build-default-condition"));
function buildBasicArrayFieldFilter(field, filterOperators, searchString, isNegated) {
    if (!isNegated) {
        if (filterOperators?.has('IncludesAll')) {
            return new datasource_toolkit_1.ConditionTreeLeaf(field, 'IncludesAll', searchString);
        }
    }
    else if (filterOperators?.has('IncludesNone')) {
        if (filterOperators.has('IncludesNone') && filterOperators.has('Missing')) {
            return datasource_toolkit_1.ConditionTreeFactory.union(new datasource_toolkit_1.ConditionTreeLeaf(field, 'IncludesNone', searchString), new datasource_toolkit_1.ConditionTreeLeaf(field, 'Missing'));
        }
        if (filterOperators.has('IncludesNone')) {
            return new datasource_toolkit_1.ConditionTreeLeaf(field, 'IncludesNone', searchString);
        }
    }
    return (0, build_default_condition_1.default)(isNegated);
}
exports.default = buildBasicArrayFieldFilter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGQtYmFzaWMtYXJyYXktZmllbGQtZmlsdGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2RlY29yYXRvcnMvc2VhcmNoL2ZpbHRlci1idWlsZGVyL2J1aWxkLWJhc2ljLWFycmF5LWZpZWxkLWZpbHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLHdFQUt5QztBQUV6Qyw4RkFBb0U7QUFFcEUsU0FBd0IsMEJBQTBCLENBQ2hELEtBQWEsRUFDYixlQUEwQyxFQUMxQyxZQUFxQixFQUNyQixTQUFrQjtJQUVsQixJQUFJLENBQUMsU0FBUyxFQUFFO1FBQ2QsSUFBSSxlQUFlLEVBQUUsR0FBRyxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQ3ZDLE9BQU8sSUFBSSxzQ0FBaUIsQ0FBQyxLQUFLLEVBQUUsYUFBYSxFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQ2xFO0tBQ0Y7U0FBTSxJQUFJLGVBQWUsRUFBRSxHQUFHLENBQUMsY0FBYyxDQUFDLEVBQUU7UUFDL0MsSUFBSSxlQUFlLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDekUsT0FBTyx5Q0FBb0IsQ0FBQyxLQUFLLENBQy9CLElBQUksc0NBQWlCLENBQUMsS0FBSyxFQUFFLGNBQWMsRUFBRSxZQUFZLENBQUMsRUFDMUQsSUFBSSxzQ0FBaUIsQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDLENBQ3hDLENBQUM7U0FDSDtRQUVELElBQUksZUFBZSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUN2QyxPQUFPLElBQUksc0NBQWlCLENBQUMsS0FBSyxFQUFFLGNBQWMsRUFBRSxZQUFZLENBQUMsQ0FBQztTQUNuRTtLQUNGO0lBRUQsT0FBTyxJQUFBLGlDQUFxQixFQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzFDLENBQUM7QUF4QkQsNkNBd0JDIn0=