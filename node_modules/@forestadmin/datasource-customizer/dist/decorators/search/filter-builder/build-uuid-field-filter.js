"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const datasource_toolkit_1 = require("@forestadmin/datasource-toolkit");
const uuid_1 = require("uuid");
const build_default_condition_1 = __importDefault(require("./utils/build-default-condition"));
function buildUuidFieldFilter(field, filterOperators, searchString, isNegated) {
    if (!(0, uuid_1.validate)(searchString))
        return (0, build_default_condition_1.default)(isNegated);
    if (!isNegated && filterOperators?.has('Equal')) {
        return new datasource_toolkit_1.ConditionTreeLeaf(field, 'Equal', searchString);
    }
    if (isNegated && filterOperators?.has('NotEqual') && filterOperators?.has('Missing')) {
        return datasource_toolkit_1.ConditionTreeFactory.union(new datasource_toolkit_1.ConditionTreeLeaf(field, 'NotEqual', searchString), new datasource_toolkit_1.ConditionTreeLeaf(field, 'Missing'));
    }
    if (isNegated && filterOperators?.has('NotEqual')) {
        return new datasource_toolkit_1.ConditionTreeLeaf(field, 'NotEqual', searchString);
    }
    return (0, build_default_condition_1.default)(isNegated);
}
exports.default = buildUuidFieldFilter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGQtdXVpZC1maWVsZC1maWx0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZGVjb3JhdG9ycy9zZWFyY2gvZmlsdGVyLWJ1aWxkZXIvYnVpbGQtdXVpZC1maWVsZC1maWx0ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSx3RUFLeUM7QUFDekMsK0JBQWdEO0FBRWhELDhGQUFvRTtBQUVwRSxTQUF3QixvQkFBb0IsQ0FDMUMsS0FBYSxFQUNiLGVBQThCLEVBQzlCLFlBQW9CLEVBQ3BCLFNBQWtCO0lBRWxCLElBQUksQ0FBQyxJQUFBLGVBQVksRUFBQyxZQUFZLENBQUM7UUFBRSxPQUFPLElBQUEsaUNBQXFCLEVBQUMsU0FBUyxDQUFDLENBQUM7SUFFekUsSUFBSSxDQUFDLFNBQVMsSUFBSSxlQUFlLEVBQUUsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQy9DLE9BQU8sSUFBSSxzQ0FBaUIsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO0tBQzVEO0lBRUQsSUFBSSxTQUFTLElBQUksZUFBZSxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxlQUFlLEVBQUUsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFO1FBQ3BGLE9BQU8seUNBQW9CLENBQUMsS0FBSyxDQUMvQixJQUFJLHNDQUFpQixDQUFDLEtBQUssRUFBRSxVQUFVLEVBQUUsWUFBWSxDQUFDLEVBQ3RELElBQUksc0NBQWlCLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxDQUN4QyxDQUFDO0tBQ0g7SUFFRCxJQUFJLFNBQVMsSUFBSSxlQUFlLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxFQUFFO1FBQ2pELE9BQU8sSUFBSSxzQ0FBaUIsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLFlBQVksQ0FBQyxDQUFDO0tBQy9EO0lBRUQsT0FBTyxJQUFBLGlDQUFxQixFQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzFDLENBQUM7QUF4QkQsdUNBd0JDIn0=